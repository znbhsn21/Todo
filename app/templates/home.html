{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task Manager</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <h1>Task Manager</h1>

    <!-- Add / Edit Task Form -->
    <div class="form-container">
        {% if edit_task %}
            <h2>Edit Task: {{ edit_task.name }}</h2>
            <form method="post" action="{% url 'task_action' edit_task.id 'edit' %}">
        {% else %}
            <h2>Add Task</h2>
            <form method="post" action="{% url 'home' %}">
        {% endif %}
            {% csrf_token %}
            {{ form.as_p }}
            <button type="submit">
                {% if edit_task %} Update {% else %} Add {% endif %} Task
            </button>
        </form>
    </div>

    <!-- Task List -->
    {% if tasks %}
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Status</th>
                    <th>Created</th>
                    <th>Due</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for task in tasks %}
                    <tr>
                        <td>{{ task.name }}</td>
                        <td>
                            {% if task.status == "pending" %}
                                <span class="status-badge status-pending">Pending</span>
                            {% elif task.status == "in-progress" %}
                                <span class="status-badge status-in-progress">In-Progress</span>
                            {% elif task.status == "completed" %}
                                <span class="status-badge status-completed">Completed</span>
                            {% endif %}
                        </td>
                        <td>{{ task.created_at }}</td>
                        <td>{{ task.due_date|default:"-" }}</td>
                        <td>
                            <a href="{% url 'task_action' task.id 'edit' %}" class="btn">Edit</a>
                            <a href="{% url 'task_action' task.id 'delete' %}" class="btn"
                               onclick="return confirm('Delete task: {{ task.name }}?')">Delete</a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No tasks yet.</p>
    {% endif %}
</body>
</html>


